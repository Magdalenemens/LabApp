<div class="row justify-content-center">
  <div class="col-md-10 col-lg-10 col-xl-10">
    <div class="d-flex section-top-space">
      <!-- <div class="d-flex">
        <a style="color: #000000" href="http://127.0.0.1:5500/Master/accession-prefix.html">
          <h6 class="py-1 mt-1 header-font">Order Processing</h6>
        </a><span class="pt-1"><i class="ri-arrow-right-s-line icon"></i></span>
        <a style="color: #000000" href="#">
          <h6 class="py-1 mt-1 header-font">Anatomic Pathology Receiving</h6>
        </a>
      </div> -->
    </div>

    <div class="card mt-2 login-bg">
      <div class="card-body px-4">
        <h4 class="pt-3 pb-2 text-dark text-center">Anatomic Pathology Receiving</h4>
        <div class="d-flex justify-content-between">
          <div class="col-xxl-3 col-sm-3 col-3">
            <div class="input-group">
              <label class="input-group-text" for="PAT_ID">Accession No.</label>
              <input class="form-control" placeholder="Enter ACCN" type="text" id="ACCN" required [(ngModel)]="accn" />
              <button class="btn btn-outline-secondary" data-toggle="modal" data-target="#myModal" type="button" 
                (click)="filterRecordByAccnNo(accn)"
                style="height: 27px;padding: inherit;border-top-left-radius: 0;border-bottom-left-radius: 0;">
                <i class="ri-search-line"></i>
              </button>
            </div>
          </div>
          <div class="col-xxl-5 col-sm-5 col-5">
            <div class="d-flex justify-content-end">
              <!-- if(isSubmitButon---going handle by permission table) -->
              <button id="BtnSubmit" class="btn btn-outline-dark" [disabled]="isSubmitBtnActive" (click)="onSubmit()">
                <i class="ri-save-line"></i> Submit
              </button>
              <button id="BtnAbort" class="btn btn-outline-dark"  (click)="onAbort()">
                <i class="ri-arrow-go-back-line" ></i> Abort
              </button>
              <button class="btn btn-outline-dark cancelation add-section" style="display:none">
                <i class="ri-expand-left-line pr-2"></i>Close
              </button>
            </div>
          </div>
        </div>
        <!-- first-card -->
        <div class="card my-3">
          <div class="d-flex flex-wrap">
            <div class="col-md-3 col-lg-3 col-12">
              <div class="input-group">
                <label for="inputField1" class="input-group-text side-input-dia">Patient Id:</label>
                <label class="form-control" id="inputField1">{{apReceivingData.paT_ID}} </label>
              </div>
            </div>
            <div class="col-md-5 col-lg-5 col-12">
              <div class="input-group">
                <label for="inputField1" class="input-group-text side-input-dia">Patient Name:</label>
                <label class="form-control" id="inputField1"> {{apReceivingData.paT_NAME}}</label>
              </div>
            </div>
            <div class="col-md-12 col-lg-12 col-12">
              <div class="input-group">
                <label for="inputField1" class="input-group-text side-input-dia">Clinical Indication:</label>
                <input class="form-control" placeholder="Enter Clinical Indication" type="text" id="cliN_IND"
                  [(ngModel)]="apReceivingData.clN_IND" required />
              </div>
            </div>
            <div class="col-md-5 col-lg-5 col-12">
              <div class="input-group">
                <label for="inputField1" class="input-group-text side-input-dia">Collection Date/Time:</label>
                <input type="datetime-local" class="form-control" id="collection" required [readOnly]="true"
                  value="{{apReceivingData.drawN_DTTM}}">
              </div>
            </div>

            <div class="col-md-5 col-lg-5 col-12">
              <div class="input-group">
                <label for="inputField1" class="input-group-text side-input-dia">Receiving Date/Time:</label>
                <input type="datetime-local" class="form-control" id="collection" required
                  [(ngModel)]="apReceivingData.prcvD_DTTM">
              </div>
            </div>

            <div class="col-md-7 col-lg-7 col-12">
              <div class="input-group" style="width: 50rem;">
                <label for="inputField1" class="input-group-text side-input-dia">Assign To Pathologist:</label>
                <ng-select style="padding-left: 0; width: 100%;"  class="editable-dropdown col-md-4" placeholder="Select Pathologist"
                  [(ngModel)]="selectedJobType" (change)="onRoleChange($event)"  name="pathologist" 
                  #pathologist="ngModel">
                  <ng-option class="custom" [value]="obj.fulL_NAME + '|' + obj.useR_ID" *ngFor="let obj of jobTypeDropDown" >
                    {{ obj.fulL_NAME }}
                  </ng-option>
                </ng-select>
                <div *ngIf="submitted && pathologist.invalid" class="text-danger">
                  Please select a job.
                </div>
              </div>
            </div>

            <div class="col-md-5 col-lg-5 col-12" style="margin-left: -16%;">
              <div class="input-group">
                <label for="inputField1" class="input-group-text side-input-dia">Assigned Pathologist:</label>
                <input type="text" class="form-control" id="collection" required [(ngModel)]="selectedJobType"
                  [readOnly]="true">
              </div>
            </div>
          </div>
          <br />
          <br />
          <!-- first-card -->
          <!-- second-card -->
          <!-- <h6 class="header-font mt-3">Sample Details:</h6> -->
          <!-- <div class="card mt-2 mb-4">
          <div class="d-flex flex-wrap">

            


            </div>
          </div> -->
        </div>

      </div>
    </div>
    <!-- second-card -->

    <!-- Add TAxis -->
    <div class="row mt-1">
      <!-- period durations -->
      <div class="col-md-12">
        <div class="card pt-3">
          <div class="card-head" id="headingOne">
            <h2 style="font-size: 15px" class="mb-0 collapsed" data-toggle="collapse" data-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">


              <button (click)="findTAxis()" class="btn btn-outline-success add-section btn-rounded" data-toggle="modal"
                data-target="#myModal" type="button" [disabled]="isAddSpecimenSource">
                <i class="ri-add-line pr-1"></i>Add Specimen Source

              </button>
            </h2>
          </div>
          <div class="card mt-2">
            <div class="table-veritical-sm">
              <table class="table table-bordered data text-black" id="editableTable">
                <thead>
                  <tr>
                    <th>No</th>
                    <th>Accession</th>
                    <th>T-Axis</th>
                    <th>Description</th>

                    <!-- <th>Status</th> -->
                    <th>Actions </th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of clinicalAllData; let i = index">
                    <td><span>{{ item.sno }} </span></td>
                    <td><span>{{ item.accn }} </span></td>
                    <td><span>{{ item.t_AX }}</span></td>
                    <td><span>{{ item.t_Description }}</span></td>
                    <td>
                      <button class="delete" (click)="deleteRow(item.clncfndG_ID)">
                        <i class="ri-delete-bin-line pr-1"></i>Delete </button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- Search TAxis -->
              <div class="modal fade modal-alert rounded-3" id="taxismodel" data-bs-backdrop="static"
                data-bs-keyboard="false">
                <div class="modal-dialog modal-lg modal-dialog-scrollable">
                  <div class="modal-content">

                    <div class="bg-primary modal-header" style="color:white;">
                      Search TAxis Information
                    </div>

                    <div class="modal-body p-4 text-left">

                      <div class="col-md-7">
                        <div class="input-group">
                          <label style="height:36px !important" class="form-label input-group-text side-input-dia"
                            for="abc3">Enter
                            T Axis or Description</label>
                          <input style="height:36px !important" type="text" class="form-control" id="searchAxis"
                            placeholder="Axis Number / Description" [(ngModel)]="searchTerm"
                            (input)="searchAllFindings()" />
                          <div *ngIf="pathAllData.length === 0">
                            <p>No matching records found.</p>
                          </div>
                        </div>
                      </div>
                      <table class="table table-hover table-bordered modal-table truncate mt-3">
                        <thead>
                          <tr>
                            <th style="width:5.9rem">Ax Number</th>
                            <th>Description</th>
                            <th style="width:9rem"></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of paginatedData">
                            <td>{{item.aX_NMBR + ' - ' + item.seq}}</td>
                            <td>{{item.descrip}}</td>
                            <td>
                              <button class="rounded btn-primary btn-icon" (click)="inserclinicalData(item)"
                                data-bs-dismiss="modal">
                                <i class="ri-send-plane-line pr-2"></i>Add T-Axis
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>

                      <nav aria-label="Page navigation" *ngIf="totalPages > 1">
                        <ul class="pagination justify-content-center">
                          <li class="page-item" [class.disabled]="currentPage === 1">
                            <a class="page-link" href="#" (click)="goToPreviousPage($event)" aria-label="Previous">
                              <span aria-hidden="true">&laquo;</span>
                            </a>
                          </li>

                          <li class="page-item" *ngFor="let page of pagesArray" [class.active]="page === currentPage">
                            <a class="page-link" href="#" (click)="goToPage($event, page)">{{ page }}</a>
                          </li>

                          <li class="page-item" [class.disabled]="currentPage === totalPages">
                            <a class="page-link" href="#" (click)="goToNextPage($event)" aria-label="Next">
                              <span aria-hidden="true">&raquo;</span>
                            </a>
                          </li>
                        </ul>
                      </nav>

                      <div class="col-md-2">
                        <label for="itemsPerPage">Items per page:</label>
                        <select id="itemsPerPage" class="form-control" (change)="onPageSizeChange($event)">
                          <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
                        </select>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark cancelation" data-bs-dismiss="modal"
                          (click)="resetSearch()">
                          Close
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>